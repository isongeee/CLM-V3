<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Subscription Â· Enterprise CLM</title>
    <link rel="icon" href="../landing/favicon.svg" type="image/svg+xml" />
    <link rel="stylesheet" href="../landing/styles.css" />
    <style>
        .billing-card {
            background: white;
            border: 1px solid var(--gray-200);
            border-radius: 8px;
            padding: 24px;
            margin-bottom: 24px;
        }

        .plan-badge {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 100px;
            background: var(--primary-100);
            color: var(--primary-700);
            font-weight: 600;
            font-size: 0.875rem;
        }

        .status-badge {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 100px;
            font-size: 0.875rem;
            font-weight: 500;
        }

        .status-active {
            background: #dcfce7;
            color: #166534;
        }

        .status-trialing {
            background: #dbeafe;
            color: #1e40af;
        }

        .status-past_due {
            background: #fee2e2;
            color: #991b1b;
        }

        .status-canceled {
            background: #f3f4f6;
            color: #374151;
        }

        .invoice-list {
            list-style: none;
            padding: 0;
            margin: 0;
        }

        .invoice-item {
            display: flex;
            justify-content: space-between;
            padding: 12px 0;
            border-bottom: 1px solid var(--gray-100);
        }

        .invoice-item:last-child {
            border-bottom: none;
        }
    </style>
</head>

<body>
    <a class="skip-link" href="#main">Skip to content</a>

    <header class="site-header">
        <div class="container header-inner">
            <div class="brand">
                <a class="logo" href="../index.html" aria-label="Enterprise CLM home">CLM</a>
                <span class="brand-text">
                    <strong>Enterprise CLM</strong>
                    <span class="muted">Billing</span>
                </span>
            </div>

            <nav class="nav" aria-label="Primary">
                <a href="./index.html">Back to Dashboard</a>
                <button class="button small" id="sign-out" type="button">Sign out</button>
            </nav>
        </div>
    </header>

    <main id="main" class="section">
        <div class="container">
            <div class="section-head">
                <h1>Subscription & Billing</h1>
                <p class="muted" id="company-name">Loading company...</p>
            </div>

            <!-- Current Plan -->
            <section class="billing-card">
                <h2>Current Plan</h2>
                <div id="subscription-details">
                    <p>Loading details...</p>
                </div>
                <div class="actions" style="margin-top: 16px;">
                    <button class="button secondary small" id="btn-change-plan">Change Plan</button>
                    <button class="button secondary small" id="btn-cancel-sub"
                        style="color: #ef4444; border-color: #fca5a5;">Cancel Subscription</button>
                </div>
            </section>

            <!-- Payment Method -->
            <section class="billing-card">
                <h2>Payment Method</h2>
                <p class="muted">Manage your payment details.</p>
                <div id="payment-method-details">
                    <p>No payment method on file.</p>
                </div>
                <button class="button secondary small" id="btn-update-payment" style="margin-top: 16px;">Update
                    Card</button>
            </section>

            <!-- Invoices -->
            <section class="billing-card">
                <h2>Invoices</h2>
                <ul class="invoice-list" id="invoice-list">
                    <li class="muted">Loading invoices...</li>
                </ul>
            </section>

        </div>
    </main>

    <!-- Change Plan Modal (Simple prompt for now) -->
    <dialog id="plan-modal" style="padding: 2rem; border-radius: 8px; border: 1px solid #ccc;">
        <h3>Change Subscription Plan</h3>
        <form id="change-plan-form">
            <label style="display:block; margin-bottom: 10px;">
                <input type="radio" name="plan" value="basic"> Basic - $9.99/mo
            </label>
            <label style="display:block; margin-bottom: 20px;">
                <input type="radio" name="plan" value="real_estate"> Real Estate - $24.99/mo
            </label>
            <div style="display: flex; gap: 10px;">
                <button type="submit" class="button small">Confirm Change</button>
                <button type="button" class="button secondary small"
                    onclick="document.getElementById('plan-modal').close()">Cancel</button>
            </div>
        </form>
    </dialog>

    <div class="toast" role="status" aria-live="polite" aria-atomic="true" hidden></div>
    <script type="module" src="./subscription.js"></script>
</body>

</html>